{"version":3,"sources":["../../src/server/require.ts"],"names":["getMaybePagePath","getPagePath","requirePage","requireFontManifest","isDev","process","env","NODE_ENV","pagePathCache","get","_key","set","has","LRUCache","max","loadManifest","manifestPath","JSON","parse","fs","readFileSync","require","page","distDir","locales","isAppPath","cacheKey","serverBuildPath","join","SERVER_DIRECTORY","appPathsManifest","APP_PATHS_MANIFEST","pagesManifest","PAGES_MANIFEST","denormalizePagePath","normalizePagePath","err","console","error","PageNotFoundError","checkManifest","manifest","curPath","manifestNoLocales","key","Object","keys","normalizeLocalePath","pathname","pagePath","path","undefined","endsWith","promises","readFile","catch","MissingStaticPage","message","fontManifest","FONT_MANIFEST"],"mappings":"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"}