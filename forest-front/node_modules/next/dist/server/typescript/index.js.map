{"version":3,"sources":["../../../src/server/typescript/index.ts"],"names":["createTSPlugin","modules","ts","typescript","create","info","init","proxy","Object","k","keys","languageService","x","args","apply","getCompletionsAtPosition","fileName","position","options","prior","isGlobalCompletion","isMemberCompletion","isNewIdentifierLocation","entries","isAppEntryFile","getIsClientEntry","serverLayer","filterCompletionsAtPosition","metadata","entryConfig","addCompletionsAtPosition","source","getSource","forEachChild","node","isPositionInsideNode","isDefaultFunctionExport","push","entryDefault","getCompletionEntryDetails","entryName","formatOptions","preferences","data","entryCompletionEntryDetails","metadataCompletionEntryDetails","getQuickInfoAtPosition","definitions","getDefinitionAtPosition","hasDisallowedReactAPIDefinition","metadataInfo","overriden","getSemanticDiagnostics","isClientEntry","isAppEntry","e","file","category","DiagnosticCategory","Error","code","NEXT_TS_ERRORS","MISPLACED_CLIENT_ENTRY","isInsideApp","errorDiagnostic","errorEntry","isImportDeclaration","diagnostics","getSemanticDiagnosticsForImportDeclaration","isVariableStatement","modifiers","some","m","kind","SyntaxKind","ExportKeyword","getSemanticDiagnosticsForExportVariableStatement","metadataDiagnostics","getSemanticDiagnosticsForExportVariableStatementInClientEntry","clientBoundary","getSemanticDiagnosticsForFunctionExport","isFunctionDeclaration","isExportDeclaration","getSemanticDiagnosticsForExportDeclarationInClientEntry","getSemanticDiagnosticsForExportDeclaration","getDefinitionAndBoundSpan","metadataDefinition"],"mappings":"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"}