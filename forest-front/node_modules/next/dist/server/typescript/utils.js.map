{"version":3,"sources":["../../../src/server/typescript/utils.ts"],"names":["log","init","getTs","getInfo","getTypeChecker","getSource","removeStringQuotes","getIsClientEntry","ts","info","appDirRegExp","message","project","projectService","logger","opts","projectDir","getCurrentDirectory","RegExp","replace","languageService","getProgram","fileName","getSourceFile","str","isPositionInsideNode","position","node","start","getFullStart","getFullWidth","isDefaultFunctionExport","isFunctionDeclaration","hasExportKeyword","hasDefaultKeyword","modifiers","modifier","kind","SyntaxKind","ExportKeyword","DefaultKeyword","isInsideApp","filePath","test","isAppEntryFile","path","basename","isPageFile","throwOnInvalidDirective","source","isClientEntry","isDirective","forEachChild","isExpressionStatement","isStringLiteral","expression","text","e","messageText","getStart","length","getWidth"],"mappings":"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"}