{"version":3,"sources":["../../../src/server/app-render/use-flight-response.tsx"],"names":["useFlightResponse","writable","req","clientReferenceManifest","rscChunks","flightResponseRef","nonce","current","createFromReadableStream","require","renderStream","forwardStream","readableStreamTee","res","moduleMap","isEdgeRuntime","edgeSSRModuleMapping","ssrModuleMapping","bootstrapped","forwardReader","getReader","writer","getWriter","startScriptTag","JSON","stringify","textDecoder","TextDecoder","read","then","done","value","push","write","encodeText","htmlEscapeJsonString","close","responsePartial","decodeText","scripts"],"mappings":"AAAA;;;;QAcgBA,iBAAiB,GAAjBA,iBAAiB;AAT1B,IAAA,qBAA4B,WAA5B,4BAA4B,CAAA;AACE,IAAA,WAAe,WAAf,eAAe,CAAA;AACtB,IAAA,UAAc,WAAd,cAAc,CAAA;AAOrC,SAASA,iBAAiB,CAC/BC,QAAoC,EACpCC,GAA+B,EAC/BC,uBAAgD,EAChDC,SAAuB,EACvBC,iBAAoC,EACpCC,KAAc,EACQ;IACtB,IAAID,iBAAiB,CAACE,OAAO,KAAK,IAAI,EAAE;QACtC,OAAOF,iBAAiB,CAACE,OAAO,CAAA;KACjC;IACD,MAAM,EACJC,wBAAwB,CAAA,IACzB,GAAGC,OAAO,CAAC,yDAAyD,CAAC;IAEtE,MAAM,CAACC,YAAY,EAAEC,aAAa,CAAC,GAAGC,CAAAA,GAAAA,qBAAiB,AAAK,CAAA,kBAAL,CAACV,GAAG,CAAC;IAC5D,MAAMW,GAAG,GAAGL,wBAAwB,CAACE,YAAY,EAAE;QACjDI,SAAS,EAAEC,UAAa,cAAA,GACpBZ,uBAAuB,CAACa,oBAAoB,GAC5Cb,uBAAuB,CAACc,gBAAgB;KAC7C,CAAC;IACFZ,iBAAiB,CAACE,OAAO,GAAGM,GAAG;IAE/B,IAAIK,YAAY,GAAG,KAAK;IACxB,iDAAiD;IACjD,MAAMC,aAAa,GAAGR,aAAa,CAACS,SAAS,EAAE;IAC/C,MAAMC,MAAM,GAAGpB,QAAQ,CAACqB,SAAS,EAAE;IACnC,MAAMC,cAAc,GAAGjB,KAAK,GACxB,CAAC,cAAc,EAAEkB,IAAI,CAACC,SAAS,CAACnB,KAAK,CAAC,CAAC,CAAC,CAAC,GACzC,UAAU;IACd,MAAMoB,WAAW,GAAG,IAAIC,WAAW,EAAE;IAErC,SAASC,IAAI,GAAG;QACdT,aAAa,CAACS,IAAI,EAAE,CAACC,IAAI,CAAC,CAAC,EAAEC,IAAI,CAAA,EAAEC,KAAK,CAAA,EAAE,GAAK;YAC7C,IAAIA,KAAK,EAAE;gBACT3B,SAAS,CAAC4B,IAAI,CAACD,KAAK,CAAC;aACtB;YAED,IAAI,CAACb,YAAY,EAAE;gBACjBA,YAAY,GAAG,IAAI;gBACnBG,MAAM,CAACY,KAAK,CACVC,CAAAA,GAAAA,qBAAU,AAIT,CAAA,WAJS,CACR,CAAC,EAAEX,cAAc,CAAC,uCAAuC,EAAEY,CAAAA,GAAAA,WAAoB,AAE9E,CAAA,qBAF8E,CAC7EX,IAAI,CAACC,SAAS,CAAC;AAAC,qBAAC;iBAAC,CAAC,CACpB,CAAC,UAAU,CAAC,CACd,CACF;aACF;YACD,IAAIK,IAAI,EAAE;gBACRzB,iBAAiB,CAACE,OAAO,GAAG,IAAI;gBAChCc,MAAM,CAACe,KAAK,EAAE;aACf,MAAM;gBACL,MAAMC,eAAe,GAAGC,CAAAA,GAAAA,qBAAU,AAAoB,CAAA,WAApB,CAACP,KAAK,EAAEL,WAAW,CAAC;gBACtD,MAAMa,OAAO,GAAG,CAAC,EAAEhB,cAAc,CAAC,mBAAmB,EAAEY,CAAAA,GAAAA,WAAoB,AAE1E,CAAA,qBAF0E,CACzEX,IAAI,CAACC,SAAS,CAAC;AAAC,qBAAC;oBAAEY,eAAe;iBAAC,CAAC,CACrC,CAAC,UAAU,CAAC;gBAEbhB,MAAM,CAACY,KAAK,CAACC,CAAAA,GAAAA,qBAAU,AAAS,CAAA,WAAT,CAACK,OAAO,CAAC,CAAC;gBACjCX,IAAI,EAAE;aACP;SACF,CAAC;KACH;IACDA,IAAI,EAAE;IAEN,OAAOf,GAAG,CAAA;CACX"}