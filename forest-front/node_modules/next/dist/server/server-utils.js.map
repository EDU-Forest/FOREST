{"version":3,"sources":["../../src/server/server-utils.ts"],"names":["normalizeVercelUrl","interpolateDynamicPath","getUtils","req","trustQuery","paramKeys","pageIsDynamic","defaultRouteRegex","_parsedUrl","parseUrl","url","search","key","Object","keys","query","NEXT_QUERY_PARAM_PREFIX","startsWith","groups","includes","formatUrl","pathname","params","param","optional","repeat","builtParam","paramIdx","indexOf","paramValue","value","Array","isArray","map","v","encodeURIComponent","join","slice","length","page","i18n","basePath","rewrites","trailingSlash","dynamicRouteMatcher","defaultRouteMatches","getNamedRouteRegex","getRouteMatcher","handleRewrites","parsedUrl","rewriteParams","fsPathname","matchesPage","fsPathnameNoSlash","removeTrailingSlash","checkRewrite","rewrite","matcher","getPathMatch","source","removeUnnamedParams","strict","has","missing","hasParams","matchHas","assign","parsedDestination","destQuery","prepareDestination","appendParamsToQuery","destination","protocol","replace","RegExp","destLocalePathResult","normalizeLocalePath","locales","nextInternalLocale","detectedLocale","dynamicParams","beforeFiles","finished","afterFiles","fallback","handleBasePath","getParamsFromRouteMatches","renderOpts","routeKeys","re","exec","str","obj","fromEntries","URLSearchParams","matchesHasLocale","normalizedKey","substring","routeKeyNames","filterLocaleItem","val","isCatchAll","_val","some","item","toLowerCase","locale","splice","every","name","reduce","prev","keyName","paramName","pos","parseInt","headers","normalizeDynamicRouteParams","ignoreOptional","hasValidParams","normalizeRscPath","defaultValue","isOptional","isDefaultValue","defaultVal","undefined","split","handleLocale","res","routeNoAssetPath","shouldNotRedirect","defaultLocale","detectLocaleCookie","acceptPreferredLocale","localeDetection","acceptLanguage","_","host","hostname","detectedDomain","detectDomainLocale","domains","addRequestMeta","localeDomainRedirect","localePathResult","localeToCheck","matchedDomain","domain","http","denormalizedPagePath","denormalizePagePath","detectedDefaultLocale","shouldStripDefaultLocale","shouldAddLocalePrefix","previous","getHeader","setHeader","cookie","serialize","httpOnly","path","statusCode","TEMPORARY_REDIRECT_STATUS","end"],"mappings":"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"}