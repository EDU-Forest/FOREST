{"version":3,"sources":["../../src/server/image-optimizer.ts"],"names":["getHash","detectContentType","getMaxAge","optimizeImage","imageOptimizer","sendResponse","getImageSize","AVIF","WEBP","PNG","JPEG","GIF","SVG","ICO","CACHE_VERSION","ANIMATABLE_TYPES","VECTOR_TYPES","BLUR_IMG_SIZE","BLUR_QUALITY","sharp","require","process","env","NEXT_SHARP_PATH","e","showSharpMissingWarning","NODE_ENV","getSupportedMimeType","options","accept","mimeType","mediaType","includes","items","hash","createHash","item","update","String","digest","replace","writeToCacheDir","dir","extension","maxAge","expireAt","buffer","etag","filename","join","promises","rm","force","recursive","catch","rmdir","mkdir","writeFile","every","b","i","ImageOptimizerCache","validateParams","req","query","nextConfig","isDev","imageData","images","deviceSizes","imageSizes","domains","minimumCacheTTL","formats","remotePatterns","url","w","q","href","errorMessage","Array","isArray","isAbsolute","startsWith","hrefParsed","URL","toString","_error","protocol","hasMatch","width","parseInt","isNaN","sizes","push","isValidSize","quality","headers","isStatic","basePath","getCacheKey","constructor","distDir","cacheDir","get","cacheKey","files","readdir","now","Date","file","maxAgeSt","expireAtSt","split","readFile","Number","value","kind","revalidateAfter","Math","max","curRevalidate","isStale","_","set","revalidate","Error","err","console","error","ImageError","statusCode","message","parseCacheControl","str","map","Map","directive","key","trim","toLowerCase","age","endsWith","slice","n","contentType","height","nextConfigOutput","optimizedBuffer","transformer","sequentialRead","rotate","resize","undefined","withoutEnlargement","avif","avifQuality","chromaSubsampling","warn","chalk","yellow","bold","webp","png","jpeg","toBuffer","orientation","getOrientation","operations","Orientation","RIGHT_TOP","type","numRotations","BOTTOM_RIGHT","LEFT_BOTTOM","processBuffer","_req","_res","paramsResult","handleRequest","upstreamBuffer","upstreamType","upstreamRes","fetch","ok","status","Buffer","from","arrayBuffer","mocked","createRequestResponseMocks","method","socket","res","nodeUrl","parse","hasStreamed","concat","buffers","getHeader","cacheControl","dangerouslyAllowSVG","vector","animate","isAnimated","getExtension","output","meta","getMetadata","opts","blurWidth","blurHeight","blurDataURL","unescape","getImageBlurSvg","getFileNameWithExtension","urlWithoutQueryParams","fileNameWithExtension","pop","fileName","setResponseHeaders","xCache","imagesConfig","setHeader","sendEtagResponse","finished","contentDisposition","contentDispositionType","contentSecurityPolicy","getContentType","result","byteLength","end","metadata","decodeBuffer","imageSizeOf","Deferred","promise","Promise","resolve","reject"],"mappings":"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"}