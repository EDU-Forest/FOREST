{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["CacheStates","fetchServerResponse","createRecordFromThenable","readRecordValue","createHrefFromUrl","invalidateCacheBelowFlightSegmentPath","fillCacheWithDataProperty","createOptimisticTree","applyRouterStatePatchToTree","shouldHardNavigate","isNavigatingToNewRootLayout","handleMutable","applyFlightData","handleExternalUrl","state","mutable","url","pendingPush","previousTree","tree","mpaNavigation","canonicalUrl","applyFocusAndScroll","navigateReducer","action","isExternalUrl","navigateType","cache","forceOptimisticNavigation","pathname","hash","href","isForCurrentTree","JSON","stringify","toString","prefetchValues","prefetchCache","get","treeAtTimeOfPrefetch","data","flightData","canonicalUrlOverride","flightDataPath","flightSegmentPath","slice","treePatch","newTree","applied","hardNavigate","status","READY","subTreeData","patchedTree","hashFragment","segments","split","push","optimisticTree","res","nextUrl","bailOptimistic","Error"],"mappings":"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"}