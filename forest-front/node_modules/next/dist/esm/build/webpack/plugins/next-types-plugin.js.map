{"version":3,"sources":["../../../../src/build/webpack/plugins/next-types-plugin.ts"],"names":["fs","webpack","sources","parse","path","WEBPACK_LAYERS","denormalizePagePath","ensureLeadingSlash","normalizePathSep","HTTP_METHODS","isDynamicRoute","normalizeAppPath","getPageFromPath","PLUGIN_NAME","createTypeGuardFile","fullPath","relativePath","options","type","map","method","join","slots","slot","collectNamedSlots","layoutPath","layoutDir","dirname","items","readdir","withFileTypes","item","isDirectory","name","startsWith","push","slice","devPageFiles","Set","routeTypes","edge","static","dynamic","node","extra","formatRouteToRouteType","route","isDynamic","split","part","endsWith","routeType","redirectsRewritesTypesProcessed","addRedirectsRewritesRouteTypes","rewrites","redirects","addExtraRoute","source","tokens","Array","isArray","possibleNormalizedRoutes","slugCnt","append","suffix","i","length","fork","currentLength","token","slug","modifier","prefix","pattern","test","normalizedRoute","rewrite","beforeFiles","afterFiles","fallback","redirect","createRouteDefinitions","staticRouteTypes","dynamicRouteTypes","routeTypesFallback","appTypesBasePath","NextTypesPlugin","constructor","dir","distDir","appDir","dev","isEdgeServer","pageExtensions","pagesDir","typedRoutes","distDirAbsolutePath","originalRewrites","originalRedirects","getRelativePathFromAppTypesDir","moduleRelativePathToAppDir","moduleAbsolutePath","moduleInAppTypesAbsolutePath","relative","collectPage","filePath","isApp","sep","isPages","apply","compiler","assetDirRelative","handleModule","mod","assets","resource","layer","server","IS_LAYOUT","IS_PAGE","IS_ROUTE","relativePathToApp","typePath","replace","relativeImportPath","assetPath","RawSource","hooks","compilation","tap","processAssets","tapAsync","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","callback","promises","chunkGroups","forEach","chunkGroup","chunks","chunk","chunkModules","chunkGraph","getChunkModulesIterable","anyModule","modules","concatenatedMod","Promise","all","file","packageJsonTypePath","packageJsonAssetPath","linkTypePath","linkAssetPath"],"mappings":"AAGA,OAAOA,EAAE,MAAM,aAAa,CAAA;AAC5B,SAASC,OAAO,EAAEC,OAAO,QAAQ,oCAAoC,CAAA;AACrE,SAASC,KAAK,QAAQ,mCAAmC,CAAA;AACzD,OAAOC,IAAI,MAAM,MAAM,CAAA;AAEvB,SAASC,cAAc,QAAQ,wBAAwB,CAAA;AACvD,SAASC,mBAAmB,QAAQ,qDAAqD,CAAA;AACzF,SAASC,kBAAkB,QAAQ,oDAAoD,CAAA;AACvF,SAASC,gBAAgB,QAAQ,kDAAkD,CAAA;AACnF,SAASC,YAAY,QAAQ,0BAA0B,CAAA;AACvD,SAASC,cAAc,QAAQ,kCAAkC,CAAA;AACjE,SAASC,gBAAgB,QAAQ,4CAA4C,CAAA;AAC7E,SAASC,eAAe,QAAQ,eAAe,CAAA;AAE/C,MAAMC,WAAW,GAAG,iBAAiB;AAoBrC,SAASC,mBAAmB,CAC1BC,QAAgB,EAChBC,YAAoB,EACpBC,OAGC,EACD;IACA,OAAO,CAAC,SAAS,EAAEF,QAAQ,CAAC;wBACN,EAAEC,YAAY,CAAC;AACvC,EACEC,OAAO,CAACC,IAAI,KAAK,OAAO,GACpB,CAAC,iDAAiD,CAAC,GACnD,CAAC,2FAA2F,CAAC,CAClG;;;;;;EAMC,EACED,OAAO,CAACC,IAAI,KAAK,OAAO,GACpBT,YAAY,CAACU,GAAG,CAAC,CAACC,MAAM,GAAK,CAAC,EAAEA,MAAM,CAAC,WAAW,CAAC,CAAC,CAACC,IAAI,CAAC,MAAM,CAAC,GACjE,mBAAmB,CACxB;;;;;;;;EAQD,EACEJ,OAAO,CAACC,IAAI,KAAK,MAAM,IAAID,OAAO,CAACC,IAAI,KAAK,OAAO,GAC/C,mDAAmD,GACnD,EAAE,CACP;EACD,EACED,OAAO,CAACC,IAAI,KAAK,OAAO,GACpB,EAAE,GACF,CAAC;;;EAGP,CAAC,CACA;;;AAGH,EACED,OAAO,CAACC,IAAI,KAAK,OAAO,GACpBT,YAAY,CAACU,GAAG,CACd,CAACC,MAAM,GAAK,CAAC;KAChB,EAAEA,MAAM,CAAC;;;;;kBAKI,EAAEA,MAAM,CAAC;;qDAE0B,EAAEA,MAAM,CAAC;;OAEvD,EAAEA,MAAM,CAAC;;;;;;;kBAOE,EAAEA,MAAM,CAAC;;sDAE2B,EAAEA,MAAM,CAAC;;OAExD,EAAEA,MAAM,CAAC;;;;AAIhB,CAAC,CACM,CAACC,IAAI,CAAC,EAAE,CAAC,GACV,CAAC;iBACU,EACTJ,OAAO,CAACC,IAAI,KAAK,MAAM,GAAG,WAAW,GAAG,aAAa,CACtD;;;;mBAIY,EACfD,OAAO,CAACC,IAAI,KAAK,MAAM,GAAG,WAAW,GAAG,aAAa,CACtD;;;AAGH,CAAC,CACA;;;;;;;;;;;;;;AAcD,EACED,OAAO,CAACK,KAAK,GACTL,OAAO,CAACK,KAAK,CAACH,GAAG,CAAC,CAACI,IAAI,GAAK,CAAC,EAAE,EAAEA,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAACF,IAAI,CAAC,IAAI,CAAC,GACpE,EAAE,CACP;;;;;;;;;;;;;;;;AAgBD,EACEJ,OAAO,CAACC,IAAI,KAAK,OAAO,GACpB,CAAC;;;;CAIN,CAAC,GACI,EAAE,CACP;;;;;;;;;AASD,CAAC,CAAA;CACA;AAED,eAAeM,iBAAiB,CAACC,UAAkB,EAAE;IACnD,MAAMC,SAAS,GAAGtB,IAAI,CAACuB,OAAO,CAACF,UAAU,CAAC;IAC1C,MAAMG,KAAK,GAAG,MAAM5B,EAAE,CAAC6B,OAAO,CAACH,SAAS,EAAE;QAAEI,aAAa,EAAE,IAAI;KAAE,CAAC;IAClE,MAAMR,KAAK,GAAG,EAAE;IAChB,KAAK,MAAMS,IAAI,IAAIH,KAAK,CAAE;QACxB,IAAIG,IAAI,CAACC,WAAW,EAAE,IAAID,IAAI,CAACE,IAAI,CAACC,UAAU,CAAC,GAAG,CAAC,EAAE;YACnDZ,KAAK,CAACa,IAAI,CAACJ,IAAI,CAACE,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC;SAC/B;KACF;IACD,OAAOd,KAAK,CAAA;CACb;AAED,OAAO,MAAMe,YAAY,GAAG,IAAIC,GAAG,EAAU,CAAA;AAE7C,oEAAoE;AACpE,0EAA0E;AAC1E,8DAA8D;AAC9D,MAAMC,UAAU,GAGZ;IACFC,IAAI,EAAE;QACJC,MAAM,EAAE,EAAE;QACVC,OAAO,EAAE,EAAE;KACZ;IACDC,IAAI,EAAE;QACJF,MAAM,EAAE,EAAE;QACVC,OAAO,EAAE,EAAE;KACZ;IACDE,KAAK,EAAE;QACLH,MAAM,EAAE,EAAE;QACVC,OAAO,EAAE,EAAE;KACZ;CACF;AAED,SAASG,sBAAsB,CAACC,KAAa,EAAE;IAC7C,MAAMC,SAAS,GAAGrC,cAAc,CAACoC,KAAK,CAAC;IACvC,IAAIC,SAAS,EAAE;QACbD,KAAK,GAAGA,KAAK,CACVE,KAAK,CAAC,GAAG,CAAC,CACV7B,GAAG,CAAC,CAAC8B,IAAI,GAAK;YACb,IAAIA,IAAI,CAACf,UAAU,CAAC,GAAG,CAAC,IAAIe,IAAI,CAACC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAC9C,IAAID,IAAI,CAACf,UAAU,CAAC,MAAM,CAAC,EAAE;oBAC3B,aAAa;oBACb,OAAO,CAAC,mBAAmB,CAAC,CAAA;iBAC7B,MAAM,IAAIe,IAAI,CAACf,UAAU,CAAC,OAAO,CAAC,IAAIe,IAAI,CAACC,QAAQ,CAAC,IAAI,CAAC,EAAE;oBAC1D,eAAe;oBACf,OAAO,CAAC,2BAA2B,CAAC,CAAA;iBACrC;gBACD,UAAU;gBACV,OAAO,CAAC,eAAe,CAAC,CAAA;aACzB;YACD,OAAOD,IAAI,CAAA;SACZ,CAAC,CACD5B,IAAI,CAAC,GAAG,CAAC;KACb;IAED,OAAO;QACL0B,SAAS;QACTI,SAAS,EAAE,CAAC,UAAU,EAAEL,KAAK,CAAC,EAAE,CAAC;KAClC,CAAA;CACF;AAED,6EAA6E;AAC7E,IAAIM,+BAA+B,GAAG,KAAK;AAE3C,kDAAkD;AAClD,SAASC,8BAA8B,CACrCC,QAA8B,EAC9BC,SAAiC,EACjC;IACA,SAASC,aAAa,CAACC,MAAc,EAAE;QACrC,IAAIC,MAAM,AAAqB;QAC/B,IAAI;YACFA,MAAM,GAAGvD,KAAK,CAACsD,MAAM,CAAC;SACvB,CAAC,OAAM;QACN,gEAAgE;SACjE;QAED,IAAIE,KAAK,CAACC,OAAO,CAACF,MAAM,CAAC,EAAE;YACzB,MAAMG,wBAAwB,GAAG;gBAAC,EAAE;aAAC;YACrC,IAAIC,OAAO,GAAG,CAAC;YAEf,SAASC,MAAM,CAACC,MAAc,EAAE;gBAC9B,IAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,wBAAwB,CAACK,MAAM,EAAED,CAAC,EAAE,CAAE;oBACxDJ,wBAAwB,CAACI,CAAC,CAAC,IAAID,MAAM;iBACtC;aACF;YAED,SAASG,IAAI,CAACH,MAAc,EAAE;gBAC5B,MAAMI,aAAa,GAAGP,wBAAwB,CAACK,MAAM;gBACrD,IAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGG,aAAa,EAAEH,CAAC,EAAE,CAAE;oBACtCJ,wBAAwB,CAAC1B,IAAI,CAAC0B,wBAAwB,CAACI,CAAC,CAAC,GAAGD,MAAM,CAAC;iBACpE;aACF;YAED,KAAK,MAAMK,KAAK,IAAIX,MAAM,CAAE;gBAC1B,IAAI,OAAOW,KAAK,KAAK,QAAQ,EAAE;oBAC7B,sCAAsC;oBACtC,MAAMC,IAAI,GACRD,KAAK,CAACpC,IAAI,IAAI,CAAC6B,CAAAA,OAAO,EAAE,CAAA,KAAK,CAAC,GAAG,MAAM,GAAG,CAAC,IAAI,EAAEA,OAAO,CAAC,CAAC,CAAC;oBAE7D,IAAIO,KAAK,CAACE,QAAQ,KAAK,GAAG,EAAE;wBAC1BR,MAAM,CAAC,CAAC,EAAEM,KAAK,CAACG,MAAM,CAAC,KAAK,EAAEF,IAAI,CAAC,EAAE,CAAC,CAAC;qBACxC,MAAM,IAAID,KAAK,CAACE,QAAQ,KAAK,GAAG,EAAE;wBACjCR,MAAM,CAAC,CAAC,EAAEM,KAAK,CAACG,MAAM,CAAC,IAAI,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC;qBACtC,MAAM,IAAID,KAAK,CAACE,QAAQ,KAAK,EAAE,EAAE;wBAChC,IAAIF,KAAK,CAACI,OAAO,KAAK,cAAc,EAAE;4BACpC,cAAc;4BACdV,MAAM,CAAC,CAAC,EAAEM,KAAK,CAACG,MAAM,CAAC,CAAC,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC;yBACnC,MAAM,IAAID,KAAK,CAACI,OAAO,KAAK,IAAI,EAAE;4BACjC,6BAA6B;4BAC7BV,MAAM,CAAC,CAAC,EAAEM,KAAK,CAACG,MAAM,CAAC,KAAK,EAAEF,IAAI,CAAC,EAAE,CAAC,CAAC;yBACxC,MAAM,IAAID,KAAK,CAACI,OAAO,KAAK,IAAI,EAAE;4BACjC,mBAAmB;4BACnBV,MAAM,CAAC,CAAC,EAAEM,KAAK,CAACG,MAAM,CAAC,IAAI,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC;yBACtC,MAAM;4BACL,2DAA2D;4BAC3D,OAAM;yBACP;qBACF,MAAM,IAAID,KAAK,CAACE,QAAQ,KAAK,GAAG,EAAE;wBACjC,IAAI,mBAAmBG,IAAI,CAACL,KAAK,CAACI,OAAO,CAAC,EAAE;4BAC1C,yDAAyD;4BACzDV,MAAM,CAACM,KAAK,CAACG,MAAM,CAAC;4BACpBL,IAAI,CAACE,KAAK,CAACI,OAAO,CAAC;yBACpB,MAAM;4BACL,8DAA8D;4BAC9D,OAAM;yBACP;qBACF;iBACF,MAAM,IAAI,OAAOJ,KAAK,KAAK,QAAQ,EAAE;oBACpCN,MAAM,CAACM,KAAK,CAAC;iBACd;aACF;YAED,KAAK,MAAMM,eAAe,IAAId,wBAAwB,CAAE;gBACtD,MAAM,EAAEd,SAAS,CAAA,EAAEI,SAAS,CAAA,EAAE,GAAGN,sBAAsB,CAAC8B,eAAe,CAAC;gBACxEpC,UAAU,CAACK,KAAK,CAACG,SAAS,GAAG,SAAS,GAAG,QAAQ,CAAC,IAAII,SAAS;aAChE;SACF;KACF;IAED,IAAIG,QAAQ,EAAE;QACZ,KAAK,MAAMsB,OAAO,IAAItB,QAAQ,CAACuB,WAAW,CAAE;YAC1CrB,aAAa,CAACoB,OAAO,CAACnB,MAAM,CAAC;SAC9B;QACD,KAAK,MAAMmB,QAAO,IAAItB,QAAQ,CAACwB,UAAU,CAAE;YACzCtB,aAAa,CAACoB,QAAO,CAACnB,MAAM,CAAC;SAC9B;QACD,KAAK,MAAMmB,QAAO,IAAItB,QAAQ,CAACyB,QAAQ,CAAE;YACvCvB,aAAa,CAACoB,QAAO,CAACnB,MAAM,CAAC;SAC9B;KACF;IAED,IAAIF,SAAS,EAAE;QACb,KAAK,MAAMyB,QAAQ,IAAIzB,SAAS,CAAE;YAChC,0BAA0B;YAC1B,wIAAwI;YACxI,IAAI,CAAC,CAAC,UAAU,IAAIyB,QAAQ,CAAC,EAAE;gBAC7BxB,aAAa,CAACwB,QAAQ,CAACvB,MAAM,CAAC;aAC/B;SACF;KACF;CACF;AAED,SAASwB,sBAAsB,GAAG;IAChC,IAAIC,gBAAgB,GAAG,EAAE;IACzB,IAAIC,iBAAiB,GAAG,EAAE;IAE1B,KAAK,MAAMjE,IAAI,IAAI;QAAC,MAAM;QAAE,MAAM;QAAE,OAAO;KAAC,CAAW;QACrDgE,gBAAgB,IAAI3C,UAAU,CAACrB,IAAI,CAAC,CAACuB,MAAM;QAC3C0C,iBAAiB,IAAI5C,UAAU,CAACrB,IAAI,CAAC,CAACwB,OAAO;KAC9C;IAED,+EAA+E;IAC/E,MAAM0C,kBAAkB,GACtB,CAACF,gBAAgB,IAAI,CAACC,iBAAiB,GAAG,QAAQ,GAAG,EAAE;IAEzD,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sBA6BY,EAAED,gBAAgB,IAAI,OAAO,CAAC;kDACF,EAC9CC,iBAAiB,IAAI,OAAO,CAC7B;;sBAEmB,EAClBC,kBAAkB,IAClB,CAAC;IACD,EACE,uDAAuD;IACvD,gBAAgB,CACjB;;;IAGD,CAAC,CACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDH,CAAC,CAAA;CACA;AAED,MAAMC,gBAAgB,GAAGjF,IAAI,CAACiB,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;AAElD,OAAO,MAAMiE,eAAe;IAW1BC,YAAYtE,OAAgB,CAAE;QAC5B,IAAI,CAACuE,GAAG,GAAGvE,OAAO,CAACuE,GAAG;QACtB,IAAI,CAACC,OAAO,GAAGxE,OAAO,CAACwE,OAAO;QAC9B,IAAI,CAACC,MAAM,GAAGzE,OAAO,CAACyE,MAAM;QAC5B,IAAI,CAACC,GAAG,GAAG1E,OAAO,CAAC0E,GAAG;QACtB,IAAI,CAACC,YAAY,GAAG3E,OAAO,CAAC2E,YAAY;QACxC,IAAI,CAACC,cAAc,GAAG5E,OAAO,CAAC4E,cAAc;QAC5C,IAAI,CAACC,QAAQ,GAAG1F,IAAI,CAACiB,IAAI,CAAC,IAAI,CAACqE,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC;QACrD,IAAI,CAACK,WAAW,GAAG9E,OAAO,CAAC8E,WAAW;QACtC,IAAI,CAACC,mBAAmB,GAAG5F,IAAI,CAACiB,IAAI,CAAC,IAAI,CAACmE,GAAG,EAAE,IAAI,CAACC,OAAO,CAAC;QAC5D,IAAI,IAAI,CAACM,WAAW,IAAI,CAAC3C,+BAA+B,EAAE;YACxDA,+BAA+B,GAAG,IAAI;YACtCC,8BAA8B,CAC5BpC,OAAO,CAACgF,gBAAgB,EACxBhF,OAAO,CAACiF,iBAAiB,CAC1B;SACF;KACF;IAEDC,8BAA8B,CAACC,0BAAkC,EAAE;QACjE,MAAMC,kBAAkB,GAAGjG,IAAI,CAACiB,IAAI,CAClC,IAAI,CAACqE,MAAM,EACXU,0BAA0B,CAC3B;QAED,MAAME,4BAA4B,GAAGlG,IAAI,CAACiB,IAAI,CAC5C,IAAI,CAAC2E,mBAAmB,EACxBX,gBAAgB,EAChBe,0BAA0B,CAC3B;QAED,OAAOhG,IAAI,CAACmG,QAAQ,CAClBD,4BAA4B,GAAG,KAAK,EACpCD,kBAAkB,CACnB,CAAA;KACF;IAEDG,WAAW,CAACC,QAAgB,EAAE;QAC5B,IAAI,CAAC,IAAI,CAACV,WAAW,EAAE,OAAM;QAE7B,MAAMW,KAAK,GAAGD,QAAQ,CAACvE,UAAU,CAAC,IAAI,CAACwD,MAAM,GAAGtF,IAAI,CAACuG,GAAG,CAAC;QACzD,MAAMC,OAAO,GAAG,CAACF,KAAK,IAAID,QAAQ,CAACvE,UAAU,CAAC,IAAI,CAAC4D,QAAQ,GAAG1F,IAAI,CAACuG,GAAG,CAAC;QAEvE,IAAI,CAACD,KAAK,IAAI,CAACE,OAAO,EAAE;YACtB,OAAM;SACP;QAED,qDAAqD;QACrD,IAAIF,KAAK,IAAI,CAAC,8BAA8BhC,IAAI,CAAC+B,QAAQ,CAAC,EAAE;YAC1D,OAAM;SACP;QAED,yCAAyC;QACzC,IACEG,OAAO,IACP,iDAAiDlC,IAAI,CAAC+B,QAAQ,CAAC,EAC/D;YACA,OAAM;SACP;QAED,IAAI3D,KAAK,GAAG,CAAC4D,KAAK,GAAG/F,gBAAgB,GAAGL,mBAAmB,CAAC,CAC1DC,kBAAkB,CAChBK,eAAe,CACbR,IAAI,CAACmG,QAAQ,CAACG,KAAK,GAAG,IAAI,CAAChB,MAAM,GAAG,IAAI,CAACI,QAAQ,EAAEW,QAAQ,CAAC,EAC5D,IAAI,CAACZ,cAAc,CACpB,CACF,CACF;QAED,MAAM,EAAE9C,SAAS,CAAA,EAAEI,SAAS,CAAA,EAAE,GAAGN,sBAAsB,CAACC,KAAK,CAAC;QAE9DP,UAAU,CAAC,IAAI,CAACqD,YAAY,GAAG,MAAM,GAAG,MAAM,CAAC,CAC7C7C,SAAS,GAAG,SAAS,GAAG,QAAQ,CACjC,IAAII,SAAS;KACf;IAED0D,KAAK,CAACC,QAA0B,EAAE;QAChC,+BAA+B;QAC/B,MAAMC,gBAAgB,GAAG,IAAI,CAACpB,GAAG,GAC7B,IAAI,GACJ,IAAI,CAACC,YAAY,GACjB,IAAI,GACJ,OAAO;QAEX,MAAMoB,YAAY,GAAG,OAAOC,GAAyB,EAAEC,MAAW,GAAK;YACrE,IAAI,CAACD,GAAG,CAACE,QAAQ,EAAE,OAAM;YAEzB,IAAI,CAAC,yBAAyBzC,IAAI,CAACuC,GAAG,CAACE,QAAQ,CAAC,EAAE,OAAM;YAExD,IAAI,CAACF,GAAG,CAACE,QAAQ,CAACjF,UAAU,CAAC,IAAI,CAACwD,MAAM,GAAGtF,IAAI,CAACuG,GAAG,CAAC,EAAE;gBACpD,IAAI,CAAC,IAAI,CAAChB,GAAG,EAAE;oBACb,IAAIsB,GAAG,CAACE,QAAQ,CAACjF,UAAU,CAAC,IAAI,CAAC4D,QAAQ,GAAG1F,IAAI,CAACuG,GAAG,CAAC,EAAE;wBACrD,IAAI,CAACH,WAAW,CAACS,GAAG,CAACE,QAAQ,CAAC;qBAC/B;iBACF;gBACD,OAAM;aACP;YAED,IAAIF,GAAG,CAACG,KAAK,KAAK/G,cAAc,CAACgH,MAAM,EAAE,OAAM;YAE/C,MAAMC,SAAS,GAAG,yBAAyB5C,IAAI,CAACuC,GAAG,CAACE,QAAQ,CAAC;YAC7D,MAAMI,OAAO,GAAG,CAACD,SAAS,IAAI,oBAAoB5C,IAAI,CAACuC,GAAG,CAACE,QAAQ,CAAC;YACpE,MAAMK,QAAQ,GAAG,CAACD,OAAO,IAAI,qBAAqB7C,IAAI,CAACuC,GAAG,CAACE,QAAQ,CAAC;YACpE,MAAMM,iBAAiB,GAAGrH,IAAI,CAACmG,QAAQ,CAAC,IAAI,CAACb,MAAM,EAAEuB,GAAG,CAACE,QAAQ,CAAC;YAElE,IAAI,CAAC,IAAI,CAACxB,GAAG,EAAE;gBACb,IAAI4B,OAAO,IAAIC,QAAQ,EAAE;oBACvB,IAAI,CAAChB,WAAW,CAACS,GAAG,CAACE,QAAQ,CAAC;iBAC/B;aACF;YAED,MAAMO,QAAQ,GAAGtH,IAAI,CAACiB,IAAI,CACxBgE,gBAAgB,EAChBoC,iBAAiB,CAACE,OAAO,2BAA2B,KAAK,CAAC,CAC3D;YACD,MAAMC,kBAAkB,GAAGxH,IAAI,CAC5BiB,IAAI,CAAC,IAAI,CAAC8E,8BAA8B,CAACsB,iBAAiB,CAAC,CAAC,CAC5DE,OAAO,2BAA2B,EAAE,CAAC,CACrCA,OAAO,QAAQ,GAAG,CAAC;YACtB,MAAME,SAAS,GAAGd,gBAAgB,GAAG,GAAG,GAAGvG,gBAAgB,CAACkH,QAAQ,CAAC;YAErE,IAAIJ,SAAS,EAAE;gBACb,MAAMhG,KAAK,GAAG,MAAME,iBAAiB,CAACyF,GAAG,CAACE,QAAQ,CAAC;gBACnDD,MAAM,CAACW,SAAS,CAAC,GAAG,IAAI3H,OAAO,CAAC4H,SAAS,CACvChH,mBAAmB,CAACmG,GAAG,CAACE,QAAQ,EAAES,kBAAkB,EAAE;oBACpD1G,IAAI,EAAE,QAAQ;oBACdI,KAAK;iBACN,CAAC,CACH;aACF,MAAM,IAAIiG,OAAO,EAAE;gBAClBL,MAAM,CAACW,SAAS,CAAC,GAAG,IAAI3H,OAAO,CAAC4H,SAAS,CACvChH,mBAAmB,CAACmG,GAAG,CAACE,QAAQ,EAAES,kBAAkB,EAAE;oBACpD1G,IAAI,EAAE,MAAM;iBACb,CAAC,CACH;aACF,MAAM,IAAIsG,QAAQ,EAAE;gBACnBN,MAAM,CAACW,SAAS,CAAC,GAAG,IAAI3H,OAAO,CAAC4H,SAAS,CACvChH,mBAAmB,CAACmG,GAAG,CAACE,QAAQ,EAAES,kBAAkB,EAAE;oBACpD1G,IAAI,EAAE,OAAO;iBACd,CAAC,CACH;aACF;SACF;QAED4F,QAAQ,CAACiB,KAAK,CAACC,WAAW,CAACC,GAAG,CAACpH,WAAW,EAAE,CAACmH,WAAW,GAAK;YAC3DA,WAAW,CAACD,KAAK,CAACG,aAAa,CAACC,QAAQ,CACtC;gBACElG,IAAI,EAAEpB,WAAW;gBACjBuH,KAAK,EAAEnI,OAAO,CAACoI,WAAW,CAACC,kCAAkC;aAC9D,EACD,OAAOpB,MAAM,EAAEqB,QAAQ,GAAK;gBAC1B,MAAMC,QAAQ,GAAmB,EAAE;gBAEnC,eAAe;gBACf,IAAI,IAAI,CAAC5C,YAAY,EAAE;oBACrBrD,UAAU,CAACC,IAAI,CAACE,OAAO,GAAG,EAAE;oBAC5BH,UAAU,CAACC,IAAI,CAACC,MAAM,GAAG,EAAE;iBAC5B,MAAM;oBACLF,UAAU,CAACI,IAAI,CAACD,OAAO,GAAG,EAAE;oBAC5BH,UAAU,CAACI,IAAI,CAACF,MAAM,GAAG,EAAE;iBAC5B;gBAEDuF,WAAW,CAACS,WAAW,CAACC,OAAO,CAAC,CAACC,UAAU,GAAK;oBAC9CA,UAAU,CAACC,MAAM,CAACF,OAAO,CAAC,CAACG,KAAK,GAAK;wBACnC,IAAI,CAACA,KAAK,CAAC5G,IAAI,EAAE,OAAM;wBAEvB,4CAA4C;wBAC5C,IACE,CAAC4G,KAAK,CAAC5G,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,IAChC,CAAC,CACC2G,KAAK,CAAC5G,IAAI,CAACC,UAAU,CAAC,MAAM,CAAC,IAC7B,CAAC2G,KAAK,CAAC5G,IAAI,CAACiB,QAAQ,CAAC,OAAO,CAAC,IAC3B2F,KAAK,CAAC5G,IAAI,CAACiB,QAAQ,CAAC,QAAQ,CAAC,CAAC,CACjC,EACD;4BACA,OAAM;yBACP;wBAED,MAAM4F,YAAY,GAChBd,WAAW,CAACe,UAAU,CAACC,uBAAuB,CAC5CH,KAAK,CACN,AAAkC;wBACrC,KAAK,MAAM5B,GAAG,IAAI6B,YAAY,CAAE;4BAC9BN,QAAQ,CAACrG,IAAI,CAAC6E,YAAY,CAACC,GAAG,EAAEC,MAAM,CAAC,CAAC;4BAExC,oEAAoE;4BACpE,MAAM+B,SAAS,GAAGhC,GAAG,AAEpB;4BACD,IAAIgC,SAAS,CAACC,OAAO,EAAE;gCACrBD,SAAS,CAACC,OAAO,CAACR,OAAO,CAAC,CAACS,eAAe,GAAK;oCAC7CX,QAAQ,CAACrG,IAAI,CAAC6E,YAAY,CAACmC,eAAe,EAAEjC,MAAM,CAAC,CAAC;iCACrD,CAAC;6BACH;yBACF;qBACF,CAAC;iBACH,CAAC;gBAEF,MAAMkC,OAAO,CAACC,GAAG,CAACb,QAAQ,CAAC;gBAE3B,IAAI,IAAI,CAACzC,WAAW,EAAE;oBACpB,IAAI,IAAI,CAACJ,GAAG,IAAI,CAAC,IAAI,CAACC,YAAY,EAAE;wBAClCvD,YAAY,CAACqG,OAAO,CAAC,CAACY,IAAI,GAAK;4BAC7B,IAAI,CAAC9C,WAAW,CAAC8C,IAAI,CAAC;yBACvB,CAAC;qBACH;oBAED,yEAAyE;oBACzE,MAAMC,mBAAmB,GAAGnJ,IAAI,CAACiB,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;oBAC9D,MAAMmI,oBAAoB,GACxBzC,gBAAgB,GAAG,GAAG,GAAGvG,gBAAgB,CAAC+I,mBAAmB,CAAC;oBAChErC,MAAM,CAACsC,oBAAoB,CAAC,GAAG,IAAItJ,OAAO,CAAC4H,SAAS,CAClD,oBAAoB,CACrB,AAAwC;oBAEzC,MAAM2B,YAAY,GAAGrJ,IAAI,CAACiB,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;oBACpD,MAAMqI,aAAa,GACjB3C,gBAAgB,GAAG,GAAG,GAAGvG,gBAAgB,CAACiJ,YAAY,CAAC;oBACzDvC,MAAM,CAACwC,aAAa,CAAC,GAAG,IAAIxJ,OAAO,CAAC4H,SAAS,CAC3C7C,sBAAsB,EAAE,CACzB,AAAwC;iBAC1C;gBAEDsD,QAAQ,EAAE;aACX,CACF;SACF,CAAC;KACH;CACF"}