{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["path","webpack","sources","CLIENT_REFERENCE_MANIFEST","SYSTEM_ENTRYPOINTS","relative","sep","isClientComponentModule","regexCSS","getProxiedPluginState","traverseModules","nonNullable","WEBPACK_LAYERS","getClientReferenceModuleKey","pluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","ClientReferenceManifestPlugin","dev","constructor","options","appDir","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","cssFiles","clientModules","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","chunkGroups","chunkGroup","recordModule","id","chunkCSS","isCSSModule","test","type","loaders","some","item","loader","includes","layer","appClient","_identifier","slice","lastIndexOf","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","resourceResolveData","startsWith","replace","exportName","chunks","has","exportsInfo","moduleGraph","getExportsInfo","isAsyncModule","cjsExports","map","dep","base","names","filter","flat","getAppPathRequiredChunks","requiredChunk","hash","requiredChunks","esmResource","addClientReference","async","edgeExportName","addSSRIdMapping","moduleExportedKeys","exports","exportInfo","provided","key","chunk","chunkModules","chunkGraph","getChunkModulesIterable","files","f","endsWith","modId","getModuleId","anyModule","modules","concatenatedMod","entryCSSFiles","addCSSFilesToEntry","entryName","concat","getFiles","length","getParents","parent","file","json","JSON","stringify","undefined","RawSource"],"mappings":"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"}