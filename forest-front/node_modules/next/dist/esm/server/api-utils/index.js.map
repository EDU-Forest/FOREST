{"version":3,"sources":["../../../src/server/api-utils/index.ts"],"names":["HeadersAdapter","getCookieParser","headers","parseCookie","cookie","parse","parseCookieFn","require","Array","isArray","join","sendStatusCode","res","statusCode","redirect","statusOrUrl","url","Error","writeHead","Location","write","end","PRERENDER_REVALIDATE_HEADER","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","checkIsOnDemandRevalidate","req","previewProps","from","previewModeId","get","isOnDemandRevalidate","revalidateOnlyGenerated","has","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","RESPONSE_LIMIT_DEFAULT","SYMBOL_PREVIEW_DATA","Symbol","SYMBOL_CLEARED_COOKIES","clearPreviewData","options","serialize","previous","getHeader","setHeader","expires","Date","httpOnly","sameSite","process","env","NODE_ENV","secure","path","undefined","Object","defineProperty","value","enumerable","ApiError","constructor","message","sendError","statusMessage","setLazyProp","prop","getter","opts","configurable","optsReset","writable","set"],"mappings":"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"}