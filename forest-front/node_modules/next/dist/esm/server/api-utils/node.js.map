{"version":3,"sources":["../../../src/server/api-utils/node.ts"],"names":["checkIsOnDemandRevalidate","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","bytes","generateETag","sendEtagResponse","Stream","parse","isError","isResSent","interopDefault","getCookieParser","setLazyProp","sendStatusCode","redirect","clearPreviewData","sendError","ApiError","PRERENDER_REVALIDATE_HEADER","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","SYMBOL_PREVIEW_DATA","RESPONSE_LIMIT_DEFAULT","createRequestResponseMocks","getTracer","NodeSpan","RequestCookies","HeadersAdapter","tryGetPreviewData","req","res","options","cookies","isOnDemandRevalidate","headers","from","previewModeId","get","value","tokenPreviewData","encryptedPreviewData","jsonwebtoken","require","verify","previewModeSigningKey","decryptWithSecret","decryptedPreviewData","Buffer","previewModeEncryptionKey","data","JSON","Object","defineProperty","enumerable","parseJson","str","length","e","parseBody","limit","contentType","type","parameters","encoding","charset","buffer","getRawBody","body","toString","qs","decode","getMaxContentLength","responseLimit","sendData","undefined","end","statusCode","removeHeader","process","env","NODE_ENV","console","warn","url","getHeader","setHeader","pipe","isJSONLike","includes","stringifiedBody","stringify","etag","isBuffer","byteLength","sendJson","jsonBody","send","isNotValidData","setPreviewData","Error","encryptWithSecret","payload","sign","algorithm","maxAge","expiresIn","serialize","previous","Array","isArray","httpOnly","sameSite","secure","path","revalidate","urlPath","opts","context","startsWith","revalidateHeaders","unstable_onlyGenerated","allowedRevalidateHeaderKeys","trustHostHeader","key","keys","fetch","host","method","cacheHeader","toUpperCase","status","mocked","hasStreamed","err","message","apiResolver","query","resolverModule","apiContext","propagateError","dev","page","apiReq","apiRes","config","bodyParser","api","externalResolver","previewData","sizeLimit","contentLength","maxContentLength","writeData","write","endResponse","args","apply","format","json","statusOrUrl","assign","resolver","wasPiped","once","getRootSpanAttributes","set","apiRouteResult","trace","runHandler","spanName","Response","error"],"mappings":"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"}