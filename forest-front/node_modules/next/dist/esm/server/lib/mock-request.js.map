{"version":3,"sources":["../../../src/server/lib/mock-request.ts"],"names":["Stream","toNodeHeaders","MockedRequest","Readable","httpVersion","httpVersionMajor","httpVersionMinor","socket","Proxy","get","_target","prop","Error","constructor","url","headers","method","_read","emit","connection","aborted","complete","trailers","rawTrailers","rawHeaders","setTimeout","MockedResponse","Writable","statusCode","statusMessage","finished","headersSent","buffers","Headers","hasStreamed","Promise","resolve","reject","on","err","write","chunk","push","Buffer","isBuffer","from","_implicitHeader","_write","_encoding","callback","writeHead","length","Array","isArray","i","setHeader","key","value","Object","entries","hasHeader","name","has","getHeader","undefined","getHeaders","getHeaderNames","keys","delete","v","append","set","toString","removeHeader","assignSocket","detachSocket","writeContinue","writeProcessing","upgrading","chunkedEncoding","shouldKeepAlive","useChunkedEncodingByDefault","sendDate","addTrailers","flushHeaders","createRequestResponseMocks","req","res"],"mappings":"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"}