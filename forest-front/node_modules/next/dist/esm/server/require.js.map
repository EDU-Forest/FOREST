{"version":3,"sources":["../../src/server/require.ts"],"names":["fs","promises","join","FONT_MANIFEST","PAGES_MANIFEST","SERVER_DIRECTORY","APP_PATHS_MANIFEST","normalizeLocalePath","normalizePagePath","denormalizePagePath","PageNotFoundError","MissingStaticPage","LRUCache","isDev","process","env","NODE_ENV","pagePathCache","get","_key","set","has","max","loadManifest","manifestPath","JSON","parse","readFileSync","require","getMaybePagePath","page","distDir","locales","isAppPath","cacheKey","serverBuildPath","appPathsManifest","pagesManifest","err","console","error","checkManifest","manifest","curPath","manifestNoLocales","key","Object","keys","pathname","pagePath","path","getPagePath","requirePage","undefined","endsWith","readFile","catch","message","requireFontManifest","fontManifest"],"mappings":"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"}