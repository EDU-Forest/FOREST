{"version":3,"sources":["../../../../src/server/typescript/rules/metadata.ts"],"names":["NEXT_TS_ERRORS","getInfo","getSource","getTs","getTypeChecker","isPositionInsideNode","TYPE_ANOTATION","TYPE_ANOTATION_ASYNC","TYPE_IMPORT","getMetadataExport","fileName","position","source","metadataExport","ts","forEachChild","visit","node","isVariableStatement","modifiers","some","m","kind","SyntaxKind","ExportKeyword","isVariableDeclarationList","declarationList","declaration","declarations","name","getText","cachedProxiedLanguageService","cachedProxiedLanguageServiceHost","getProxiedLanguageService","languageService","languageServiceHost","ProxiedLanguageServiceHost","files","log","trace","error","getCompilationSettings","getScriptIsOpen","getCurrentDirectory","getDefaultLibFileName","o","getScriptVersion","file","ver","toString","getScriptSnapshot","getScriptFileNames","names","Set","hasOwnProperty","add","addFile","body","snap","ScriptSnapshot","fromString","getChangeRange","_","undefined","existing","readFile","getLength","fileExists","createLanguageService","createDocumentRegistry","updateVirtualFileWithType","isGenerateMetadata","sourceText","getFullText","nodeEnd","annotation","isFunctionDeclaration","getFullStart","isAsync","AsyncKeyword","getFullWidth","newSource","slice","length","isTyped","type","proxyDiagnostics","pos","n","diagnostics","getSemanticDiagnostics","filter","d","start","map","category","code","messageText","metadata","filterCompletionsAtPosition","_options","prior","newPos","completions","getCompletionsAtPosition","isIncomplete","entries","e","ScriptElementKind","memberVariableElement","typeElement","string","includes","insertText","test","kindModifiers","sortText","labelDetails","description","data","getSemanticDiagnosticsForExportVariableStatementInClientEntry","DiagnosticCategory","Error","INVALID_METADATA_EXPORT","getStart","getWidth","getSemanticDiagnosticsForExportVariableStatement","getSemanticDiagnosticsForExportDeclarationInClientEntry","exportClause","isNamedExports","elements","push","getSemanticDiagnosticsForExportDeclaration","typeChecker","symbol","getSymbolAtLocation","metadataSymbol","getAliasedSymbol","isVariableDeclaration","declarationFileName","getSourceFile","isSameFile","getCompletionEntryDetails","entryName","formatOptions","preferences","details","getQuickInfoAtPosition","insight","getDefinitionAndBoundSpan","definitionInfoAndBoundSpan","textSpan"],"mappings":"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"}