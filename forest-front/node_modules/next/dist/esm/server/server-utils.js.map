{"version":3,"sources":["../../src/server/server-utils.ts"],"names":["format","formatUrl","parse","parseUrl","normalizeLocalePath","getPathMatch","getNamedRouteRegex","getRouteMatcher","matchHas","prepareDestination","acceptLanguage","detectLocaleCookie","detectDomainLocale","denormalizePagePath","cookie","TEMPORARY_REDIRECT_STATUS","addRequestMeta","removeTrailingSlash","normalizeRscPath","NEXT_QUERY_PARAM_PREFIX","normalizeVercelUrl","req","trustQuery","paramKeys","pageIsDynamic","defaultRouteRegex","_parsedUrl","url","search","key","Object","keys","query","startsWith","groups","includes","interpolateDynamicPath","pathname","params","param","optional","repeat","builtParam","paramIdx","indexOf","paramValue","value","Array","isArray","map","v","encodeURIComponent","join","slice","length","getUtils","page","i18n","basePath","rewrites","trailingSlash","dynamicRouteMatcher","defaultRouteMatches","handleRewrites","parsedUrl","rewriteParams","fsPathname","matchesPage","fsPathnameNoSlash","checkRewrite","rewrite","matcher","source","removeUnnamedParams","strict","has","missing","hasParams","assign","parsedDestination","destQuery","appendParamsToQuery","destination","protocol","replace","RegExp","destLocalePathResult","locales","nextInternalLocale","detectedLocale","dynamicParams","beforeFiles","finished","afterFiles","fallback","handleBasePath","getParamsFromRouteMatches","renderOpts","routeKeys","re","exec","str","obj","fromEntries","URLSearchParams","matchesHasLocale","normalizedKey","substring","routeKeyNames","filterLocaleItem","val","isCatchAll","_val","some","item","toLowerCase","locale","splice","every","name","reduce","prev","keyName","paramName","pos","parseInt","headers","normalizeDynamicRouteParams","ignoreOptional","hasValidParams","defaultValue","isOptional","isDefaultValue","defaultVal","undefined","split","handleLocale","res","routeNoAssetPath","shouldNotRedirect","defaultLocale","acceptPreferredLocale","localeDetection","_","host","hostname","detectedDomain","domains","localeDomainRedirect","localePathResult","localeToCheck","matchedDomain","domain","http","denormalizedPagePath","detectedDefaultLocale","shouldStripDefaultLocale","shouldAddLocalePrefix","previous","getHeader","setHeader","serialize","httpOnly","path","statusCode","end"],"mappings":"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"}