{"version":3,"sources":["../../../../../src/shared/lib/router/utils/prepare-destination.ts"],"names":["compile","pathToRegexp","escapeStringRegexp","parseUrl","INTERCEPTION_ROUTE_MARKERS","isInterceptionRouteAppPath","getSafeParamName","paramName","newParamName","i","length","charCode","charCodeAt","escapeSegment","str","segmentName","replace","RegExp","unescapeSegments","matchHas","req","query","has","missing","params","hasMatch","hasItem","value","key","type","toLowerCase","headers","cookies","host","hostname","split","matcher","matches","Array","isArray","slice","match","groups","Object","keys","forEach","groupKey","allMatch","every","item","some","compileNonPath","includes","validate","prepareDestination","args","assign","__nextLocale","__nextDefaultLocale","__nextDataReq","__nextInferredLocaleFromDefault","escapedDestination","destination","param","parsedDestination","destQuery","destPath","pathname","hash","destHostname","destPathParamKeys","destHostnameParamKeys","destParams","push","name","destPathCompiler","destHostnameCompiler","strOrArray","entries","map","paramKeys","filter","appendParamsToQuery","newUrl","main","segment","marker","startsWith","search","err","message","Error"],"mappings":"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"}