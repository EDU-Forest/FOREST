{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["pluginState","getProxiedPluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","ClientReferenceManifestPlugin","dev","constructor","options","appDir","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","webpack","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","cssFiles","clientModules","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","traverseModules","chunkGroups","chunkGroup","recordModule","id","chunkCSS","isCSSModule","regexCSS","test","type","loaders","some","item","loader","includes","layer","WEBPACK_LAYERS","appClient","_identifier","slice","lastIndexOf","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","relative","resourceResolveData","path","startsWith","replace","exportName","getClientReferenceModuleKey","chunks","has","isClientComponentModule","exportsInfo","moduleGraph","getExportsInfo","isAsyncModule","cjsExports","map","dep","base","names","filter","flat","getAppPathRequiredChunks","requiredChunk","SYSTEM_ENTRYPOINTS","hash","nonNullable","requiredChunks","esmResource","sep","addClientReference","async","edgeExportName","addSSRIdMapping","moduleExportedKeys","exports","exportInfo","provided","key","chunk","chunkModules","chunkGraph","getChunkModulesIterable","files","f","endsWith","modId","getModuleId","anyModule","modules","concatenatedMod","entryCSSFiles","addCSSFilesToEntry","entryName","concat","getFiles","length","getParents","parent","file","CLIENT_REFERENCE_MANIFEST","json","JSON","stringify","undefined","sources","RawSource"],"mappings":"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"}